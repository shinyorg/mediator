<Project>
    <ItemGroup>
        <CompilerVisibleProperty Include="RootNamespace"/>
    </ItemGroup>
    
    <!--handler registry variables - [MediatorSingleton]/[MediatorScoped]-->
    <ItemGroup>
        <CompilerVisibleProperty Include="ShinyMediatorRegistryMethodName"/>
        <CompilerVisibleProperty Include="ShinyMediatorRegistryUseInternalClass"/>
        <CompilerVisibleProperty Include="ShinyMediatorRequestExecutorClassName"/>
        <CompilerVisibleProperty Include="ShinyMediatorStreamRequestExecutorClassName"/>
    </ItemGroup>

    <!--user httpclient registration variables-->
    <ItemGroup>
        <CompilerVisibleProperty Include="ShinyMediatorHttpRegistrationUseInternalClass"/>
        <CompilerVisibleProperty Include="ShinyMediatorHttpRegistrationNamespace"/>
        <CompilerVisibleProperty Include="ShinyMediatorHttpRegistrationClassName"/>
        <CompilerVisibleProperty Include="ShinyMediatorHttpRegistrationMethodName"/>
    </ItemGroup>
    
    <!--mediator http openapi-->
    <ItemGroup>
        <AvailableItemName Include="MediatorHttp"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="SourceItemGroup" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="Namespace" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="Uri" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="RegistrationClassName" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="RegistrationMethodName" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="UseInternalClasses" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="GenerateModelsOnly" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="GenerateJsonConverters" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="ContractPrefix" Visible="false"/>
        <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="ContractPostfix" Visible="false"/>
    </ItemGroup>

    <Target Name="_InjectShinyMediatorAdditionalFiles" BeforeTargets="GenerateMSBuildEditorConfigFileShouldRun">
        <ItemGroup>
            <AdditionalFiles Include="@(MediatorHttp)"
                             Namespace="%(MediatorHttp.Namespace)"
                             RegistrationClassName="%(MediatorHttp.RegistrationClassName)"
                             RegistrationMethodName="%(MediatorHttp.RegistrationMethodName)"
                             Uri="%(MediatorHttp.Uri)"
                             UseInternalClasses="%(MediatorHttp.UseInternalClasses)"
                             GenerateModelsOnly="%(MediatorHttp.GenerateModelsOnly)"
                             GenerateJsonConverters="%(MediatorHttp.GenerateJsonConverters)"
                             ContractPrefix="%(MediatorHttp.ContractPrefix)"
                             ContractPostfix="%(MediatorHttp.ContractPostfix)"
                             SourceItemGroup="MediatorHttp"/>
        </ItemGroup>
    </Target>
</Project>